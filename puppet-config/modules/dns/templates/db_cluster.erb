<% ########################################################################## -%>
<% #  Puppet configuration file                                             # -%>
<% #                                                                        # -%>
<% #  Copyright (C) 2014-2016 EDF S.A.                                      # -%>
<% #  Contact: CCN-HPC <dsp-cspit-ccn-hpc@edf.fr>                           # -%>
<% #                                                                        # -%>
<% #  This program is free software; you can redistribute in and/or         # -%>
<% #  modify it under the terms of the GNU General Public License,          # -%>
<% #  version 2, as published by the Free Software Foundation.              # -%>
<% #  This program is distributed in the hope that it will be useful,       # -%>
<% #  but WITHOUT ANY WARRANTY; without even the implied warranty of        # -%>
<% #  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         # -%>
<% #  GNU General Public License for more details.                          # -%>
<% ########################################################################## -%>
;####################################################################
; Bind DNS server configuration 
;####################################################################
; NOTE: This file is automatically generated by puppet.
; Changes to this file will be overwritten periodically by puppet!
;####################################################################
; TEMPLATE: {<%= @name %>}/<%= File.basename(__FILE__) %>}
;####################################################################
<% # Import Hash Table  -%>
<% clzonedef = @zone_defaults -%>
$TTL     <%= clzonedef['TTL'] %>
@       IN      SOA     localhost. root.localhost. (
<% clzonedef.map do | key,value | -%>
        <%- unless value.empty? or key == 'TTL' then -%>
                              <%= value+"		;	 "+key %>
        <%- end -%>
<% end %>)

;
@       IN      NS      <%= @hostname+"."+@local_domain%>.
@       IN      A       127.0.0.1
<% @hostfile.sort.map do | name,address | -%>
        <%- unless address.empty? then -%>
<%= name+"		IN	A	"+address %>
        <%- end -%>
<% end %>
