<% ########################################################################## -%>
<% #  Puppet configuration file                                             # -%>
<% #                                                                        # -%>
<% #  Copyright (C) 2014-2015 EDF S.A.                                      # -%>
<% #  Contact: CCN-HPC <dsp-cspit-ccn-hpc@edf.fr>                           # -%>
<% #                                                                        # -%>
<% #  This program is free software; you can redistribute in and/or         # -%>
<% #  modify it under the terms of the GNU General Public License,          # -%>
<% #  version 2, as published by the Free Software Foundation.              # -%>
<% #  This program is distributed in the hope that it will be useful,       # -%>
<% #  but WITHOUT ANY WARRANTY; without even the implied warranty of        # -%>
<% #  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         # -%>
<% #  GNU General Public License for more details.                          # -%>
<% ########################################################################## -%>

#####################################################################
# Configuration for multipath
#####################################################################
# NOTE: This file is automatically generated by puppet.
# Changes to this file will be overwritten periodically by puppet!
#####################################################################
# TEMPLATE: {<%= @name %>}/<%= File.basename(__FILE__) %>}
#####################################################################
<% multipathcfg = @config_opts -%>
<% multipathcfg.each do | key, block | -%>
<%= key -%> {
  <%- block.each do |key,value| -%>
    <%- if value.is_a?(Hash) -%>
  <%= key -%> {
      <%- value.each do |key,xvalue| -%>
    <%= key+' '+xvalue %>
      <%- end -%>
  }
    <%- else -%>
  <%= key+' '+value %>
    <%- end -%>
  <%- end -%>
}
<% end -%>

multipaths {
<% @paths.each do |path| -%>
  multipath {
  <%- path.each do |key,value| -%>
    <%= key+' '+value %>
  <%- end -%>
  }
<%- end -%>
}
